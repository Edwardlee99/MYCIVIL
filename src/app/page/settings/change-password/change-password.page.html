<ion-header>
  <ion-toolbar mode="md" color="primary">
    <ion-title>
      Change Login Password
    </ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size-xs="12" size-md="7" offset-md="2">

      <!-- Form & Welcome Message -->
    <ion-card>
            <ion-card-content class="ion-no-padding">
              <form [formGroup]="validations_form" (ngSubmit)="changepassword()">
               
                <!-- Input-field-current password -->
                <ion-item lines="full">
                  <ion-label position="floating" color="primary">Current Password:
                    <font class = "CompulsoryMsg">*</font>
                  </ion-label>
                  <ion-input [type]="showPassword ? 'text' : 'password'"
                  formControlName="cpassword"  [placeholder]="'********'" >
               </ion-input>
               <ion-button type="button" clear slot="end" (click)="showPassword = !showPassword">
                 <ion-icon name="eye"></ion-icon>
               </ion-button>
              </ion-item>
              <div class="validation-errors">
                <ng-container *ngFor="let validation of validation_messages.cpassword">
                  <div class="error-message" *ngIf="validations_form.get('cpassword').hasError(validation.type) && (validations_form.get('cpassword').dirty || validations_form.get('cpassword').touched)">
                    <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
                  </div>
                </ng-container>
              </div>
              
                 <!-- Password Section -->
                 <div formGroupName="matching_passwords">
                  <ion-item lines="full">
                    <ion-label position="floating" color="primary">New Password:
                      <font class = "CompulsoryMsg">*</font>
                    </ion-label>
                    <ion-input [type]="showPassword1 ? 'text' : 'password'"
                    formControlName="password"  [placeholder]="'********'" >
                 </ion-input>
                 <ion-button type="button" clear slot="end" (click)="showPassword1 = !showPassword1">
                   <ion-icon name="eye"></ion-icon>
                 </ion-button>
                  </ion-item>
                  <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages.password">
                      <div class="error-message" *ngIf="validations_form.get('matching_passwords').get('password').hasError(validation.type) && (validations_form.get('matching_passwords').get('password').dirty || validations_form.get('matching_passwords').get('password').touched)">
                        <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>
            
                  <ion-item lines="full">
                    <ion-label position="floating" color="primary">Confirm Password:
                      <font class = "CompulsoryMsg">*</font>
                    </ion-label>
                    <ion-input [type]="showPassword1 ? 'text' : 'password'"
                    formControlName="confirm_password" [placeholder]="'********'" >
                 </ion-input>
                 <ion-button type="button" clear slot="end" (click)="showPassword1 = !showPassword1">
                   <ion-icon name="eye"></ion-icon>
                 </ion-button>
                  </ion-item>
                  <div class="validation-errors">
                    <ng-container *ngFor="let validation of validation_messages.confirm_password">
                      <div class="error-message" *ngIf="validations_form.get('matching_passwords').get('confirm_password').hasError(validation.type) && (validations_form.get('matching_passwords').get('confirm_password').dirty || validations_form.get('matching_passwords').get('confirm_password').touched)">
                        <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
                      </div>
                    </ng-container>
                  </div>
                </div> 
                <!-- These validations are for the form group -->
                 <div class="validation-errors">
                  <ng-container *ngFor="let validation of validation_messages.matching_passwords">
                    <div class="error-message" *ngIf="validations_form.get('matching_passwords').hasError(validation.type) && (validations_form.get('matching_passwords').get('confirm_password').dirty || validations_form.get('matching_passwords').get('confirm_password').touched)">
                      <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
                    </div>
                  </ng-container>
                </div>

              
              
              <!-- Change Password Button -->
              <div class="ion-padding">
          <ion-button type="submit" expand="full" [disabled]="!validations_form.valid">
            Change  <ion-icon name="send" slot="end"></ion-icon>
          </ion-button>
         </div>
        </form>
      </ion-card-content>
       </ion-card>
       
        
          </ion-col>
        </ion-row>
</ion-grid>
</ion-content>